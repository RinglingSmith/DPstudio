<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DP Studio</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
        <aside id="sidebar">
        <header>
        <h1>Draw&Paint Studio</h1>
        </header>
        <div id="controls">
            <input type="color" id="colorPicker" value="#000000">
            <p>colorPicker</p>
            <input type="range" id="brushSize" min="1" max="50" value="5">
            <select id="brushType">
                <option value="round">round</option>
                <option value="eraser">Eraser</option>
                <option value="square">square</option>
                <option value="calligraphy">Calligraphy</option>
                <option value="airbrush">Airbrush</option>
                <option value="pixel">Pixel</option>
                <option value="mirrorX">Mirror X</option>
                <option value="patternDot">Pattern Dot</option>
            </select>
            <button id="clearBtn">Clear</button>
            <button id="savePngBtn">Save as PNG</button>
            <button id="saveJpgBtn">Save as JPG</button>
        </div>

           <button id="eraser">Eraser</button>

           <input type="text" id="layerName" placeholder="Layer name">
    <button onclick="addLayer()">Add Layer</button>

    <ul id="layerList"></ul>
        <button onclick="removeLayer()">Remove Active Layer</button>
    </div>

    <div id="layer-list">
        <h3>Layers</h3>
        <!-- Layer buttons will be dynamically generated here -->
    </div>

       <script>
        function loadLayers() {
            fetch('LayerServlet')
                .then(res => res.json())
                .then(data => {
                    const list = document.getElementById('layerList');
                    list.innerHTML = '';
                    data.layers.forEach((layer, index) => {
                        const li = document.createElement('li');
                        li.textContent = layer + ' ';
                        const delBtn = document.createElement('button');
                        delBtn.textContent = 'Delete';
                        delBtn.onclick = () => removeLayer(index);
                        li.appendChild(delBtn);
                        list.appendChild(li);
                    });
                });
        }

        function addLayer() {
            const name = document.getElementById('layerName').value;
            const params = new URLSearchParams();
            params.append('layerName', name);
            fetch('LayerServlet', {
                method: 'POST',
                headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
                body: params.toString()
            }).then(loadLayers);
        }

        function removeLayer(index) {
            fetch('LayerServlet?index=' + index, {
                method: 'DELETE'
            }).then(loadLayers);
        }

        loadLayers();
    </script>

          <div>
            <label for="canvasWidth">Width:</label>
            <input type="number" id="canvasWidth" value="800" min="100">
        </div>
        <div>
            <label for="canvasHeight">Height:</label>
            <input type="number" id="canvasHeight" value="600" min="100">
        </div>
            <button id="resizeCanvasBtn">Resize Canvas</button>

            <button id="keydown">Undo</button>
        </aside>

    <main>
    <div id="canvasWrapper" style="position:relative; width:800px; height:600px; border:1px solid #ccc;">
    <canvas id="paintCanvas" width="800" height="600" style="position:absolute; top:0; left:0; z-index:1;"></canvas>
    </div>
    </main>

    <script src="layer.java"></script>
    <script src="paint.js"></script>
    <script src="canvasHeight.js"></script>
    <script src="zoom.js"></script>
</body>
</html>
